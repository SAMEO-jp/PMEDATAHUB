---
description: "SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ“ä½œæ–¹æ³•ã€ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã€ã‚¯ã‚¨ãƒªã®æ›¸ãæ–¹ã€å‹å®‰å…¨æ€§ã®ç¢ºä¿ã«ã¤ã„ã¦å®šç¾©ã—ã¾ã™ã€‚"
globs: ["src/lib/db/**/*.ts"]
alwaysApply: false
---
# ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œï¼ˆSQLiteï¼‰

### åŸºæœ¬åŸå‰‡
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«**: `data/achievements.db`
- **å‹å®‰å…¨æ€§**: ã™ã¹ã¦ã®ã‚¯ã‚¨ãƒªã«å‹å®šç¾©ã‚’ä»˜ä¸
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: try-catchæ–‡ã§é©åˆ‡ã«å‡¦ç†

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œä¾‹
```typescript
// lib/db/db_connection.ts
import sqlite3 from 'sqlite3';
import { open } from 'sqlite';

export async function getDb() {
  return open({
    filename: 'data/achievements.db',
    driver: sqlite3.Database
  });
}

// lib/db/db_CRUD.ts
export async function getUserById(id: string): Promise<User | null> {
  try {
    const db = await getDb();
    const user = await db.get<User>('SELECT * FROM users WHERE id = ?', [id]);
    return user || null;
  } catch (error) {
    console.error('Failed to fetch user:', error);
    return null;
  }
}
```
