---
description: "Next.js App Routerã®ãƒšãƒ¼ã‚¸å®Ÿè£…ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã€Server/Client Componentã®ä½¿ã„åˆ†ã‘ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚"
globs: ["src/app/**/*.tsx"]
alwaysApply: false
---
# âœ… Next.js 14+ App Router `page.tsx` å›ºæœ‰ãƒ«ãƒ¼ãƒ«

## ğŸ“ page.tsx å°‚ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
   â”œâ”€ page.tsx                    # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆå¿…é ˆï¼‰
   â”œâ”€ loading.tsx                 # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
   â”œâ”€ error.tsx                   # ã‚¨ãƒ©ãƒ¼å‡¦ç†
   â”œâ”€ not-found.tsx              # 404ãƒšãƒ¼ã‚¸
   â”œâ”€ components/                 # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
   â”‚  â”œâ”€ XxxHeader.tsx
   â”‚  â”œâ”€ XxxTable.tsx
   â”‚  â”œâ”€ XxxForm.tsx
   â”‚  â””â”€ index.ts                 # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆé›†ç´„
   â”œâ”€ hooks/                      # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
   â”‚  â”œâ”€ useXxxData.ts
   â”‚  â”œâ”€ useXxxActions.ts
   â”‚  â””â”€ useXxxHandlers.ts
   â”œâ”€ constants/                  # å®šæ•°ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
   â”‚  â”œâ”€ statuses.ts
   â”‚  â””â”€ labels.ts
   â”œâ”€ types/                      # å‹å®šç¾©ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
   â”‚  â””â”€ xxx.types.ts
   â”œâ”€ utils/                      # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
   â”‚  â””â”€ xxxUtils.ts
   â”œâ”€ lib/                        # APIãƒ»å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
   â”‚  â””â”€ api/
   â”‚      â””â”€ fetchXxxList.ts
   â””â”€ store/                      # çŠ¶æ…‹ç®¡ç†ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
       â””â”€ xxxStore.ts
```

## ğŸš€ Next.js 14+ å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

### Server Components vs Client Components
```tsx
// Server Component page.tsxï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
export default async function Page() {
  const data = await fetchData(); // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œ
  return <ClientComponent data={data} />;
}

// Client Component page.tsxï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
'use client';
export default function Page() {
  const [state, setState] = useState();
  // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå‡¦ç†
}
```

### ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³
```tsx
// Server Component page.tsx ã§ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
async function getData() {
  const res = await fetch('https://api.example.com/data', {
    cache: 'no-store', // ã¾ãŸã¯ 'force-cache'
    next: { revalidate: 3600 } // ISR
  });
  return res.json();
}

// Client Component page.tsx ã§ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
const useData = () => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    fetchData().then(setData).finally(() => setLoading(false));
  }, []);
  
  return { data, loading };
};
```
