# PME DataHub - スタンドアロン配布版

## 🚀 統一JavaScriptスクリプトによる自動起動・終了機能

このパッケージには、**1つのJavaScriptファイル**で自動的にプロジェクトを開始・終了する機能が含まれています。

## 📁 ファイル構成

```
.next/standalone/
├── server.js              # Next.jsサーバー
├── package.json           # 依存関係
├── node_modules/          # 依存関係パッケージ
├── data/                  # データベースファイル
├── public/                # 静的ファイル
├── .next/                 # Next.jsビルドファイル
├── start-pme.js           # 統一自動起動スクリプト（クロスプラットフォーム）
├── launcher.html          # HTML自動起動ランチャー
└── README.md              # このファイル
```

## 🎯 起動方法

### 方法1: HTMLランチャー（推奨）

**すべてのプラットフォーム（Windows、Linux、macOS）**:
1. `launcher.html` をブラウザで開く
2. 自動的にサーバーが起動し、ブラウザでアプリケーションが開く
3. ページを閉じると自動的にサーバーが停止

### 方法2: 統一JavaScriptスクリプト

**すべてのプラットフォーム（Windows、Linux、macOS）**:
```bash
# 自動起動・終了機能付きスクリプトを実行
node start-pme.js

# または実行権限を設定してから実行（Linux/macOS）
chmod +x start-pme.js
./start-pme.js
```

### 方法3: 従来の方法

```bash
# 直接サーバーを起動
node server.js

# またはnpmスクリプトを使用
npm start
```

## ✨ ランチャーの機能

### HTMLランチャーの特徴
- **美しいUI**: グラデーション背景、プログレスバー、リアルタイム表示
- **自動起動**: ページを開くと自動的にサーバーが起動
- **自動終了**: ページを閉じると自動的にサーバーが停止
- **ブラウザ統合**: サーバー起動後、自動的にアプリケーションを開く
- **視覚的フィードバック**: 起動状況をプログレスバーで表示

### JavaScriptスクリプトの特徴
- **コンソール出力**: カラー付きログ、タイムスタンプ付きメッセージ
- **環境チェック**: Node.js、依存関係、ポートの自動チェック
- **プロセス管理**: 既存プロセスの自動停止、依存関係の自動インストール
- **ヘルスチェック**: 10秒ごとにサーバー状態を監視、自動復旧
- **インタラクティブ**: キー入力待機で手動停止も可能

### 🖥️ クロスプラットフォーム対応
- **Windows**: カラー出力、プロセス管理、ブラウザ自動オープン
- **Linux**: カラー出力、プロセス管理、ブラウザ自動オープン
- **macOS**: カラー出力、プロセス管理、ブラウザ自動オープン

## 🖥️ 対応環境

### Windows
- Windows 10/11
- Node.js 16以上
- ブラウザ（Chrome、Firefox、Edge）

### Linux
- Ubuntu 18.04以上
- CentOS 7以上
- Node.js 16以上

### macOS
- macOS 10.15以上
- Node.js 16以上

## 📋 事前要件

1. **Node.js**: バージョン16以上が必要
   - ダウンロード: https://nodejs.org/

2. **ブラウザ**: 最新版のブラウザ
   - Chrome、Firefox、Safari、Edge

## 🌐 アクセス方法

サーバーが起動したら、以下のURLでアクセスできます：

- **メインアプリケーション**: http://localhost:3000

## 📱 機能一覧

- ✅ HTMLランチャー（美しいUI）
- ✅ JavaScriptスクリプト（コンソール出力）
- ✅ クロスプラットフォーム対応
- ✅ 自動サーバー起動・停止
- ✅ ブラウザ自動オープン
- ✅ プロセス監視・復旧
- ✅ ヘルスチェック
- ✅ エラーハンドリング
- ✅ 依存関係自動インストール
- ✅ 既存プロセス自動停止

## 🚨 注意事項

1. **初回起動時**: 依存関係のインストールに時間がかかる場合があります
2. **ポート競合**: 他のアプリケーションがポート3000を使用している場合は自動停止されます
3. **ファイアウォール**: ローカルアクセスを許可する必要があります
4. **データベース**: `data/achievements.db` ファイルが必要です

## 🔧 トラブルシューティング

### ポート3000が使用中の場合
スクリプトが自動的に既存プロセスを停止しますが、手動で停止する場合：

```bash
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID番号> /F

# Linux/macOS
lsof -ti:3000 | xargs kill -9
```

### Node.jsが見つからない場合
- Node.jsがインストールされているか確認
- PATH環境変数にNode.jsが含まれているか確認
- ターミナル/コマンドプロンプトを再起動

### 依存関係のエラー
スクリプトが自動的に依存関係をインストールしますが、手動で実行する場合：

```bash
rm -rf node_modules
npm install
```

## 📞 サポート

問題が発生した場合は、以下の情報を含めてご連絡ください：

- 使用環境（OS、Node.jsバージョン）
- エラーメッセージ
- 実行したコマンド
- ログファイルの内容

---

**PME DataHub v0.0.1** - 統一JavaScriptスクリプトによる自動起動・終了機能付き配布版