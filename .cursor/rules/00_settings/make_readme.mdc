---
description: 
globs: 
alwaysApply: false
---
# アプリ（ページ） Readme: 商品詳細ページ

## 1. 概要

ユーザーが商品の詳細情報を閲覧し、カートに追加するためのページです。

**主要機能:**
- 商品画像、価格、説明の表示
- 在庫状況の表示
- 数量を選択してカートに追加
- 関連商品の表示

---

## 2. スクリーンショット

![商品詳細ページのスクリーンショット](./_docs/product-detail-page.png)
*(ローディング時や在庫切れの場合のUIも追加するとより良い)*

---

## 3. 技術的な仕様

### ディレクトリ構成
/app/products/[id]/
├── _components/
│   ├── AddToCartButton.tsx   # カート追加ボタン（在庫状況で活性/非活性が変化）
│   └── ImageGallery.tsx      # 商品画像のカルーセル
├── page.tsx                  # 商品データを取得し表示するメインコンポーネント
└── README.md


### データフロー
- **データ取得:**
  - `generateStaticParams` を利用してビルド時に静的生成（SSG）されます。
  - `revalidate`オプションにより、60秒ごとにISR（Incremental Static Regeneration）でデータが再検証されます。
- **利用API:**
  - `https://api.example.com/products/{id}`
- **状態管理:**
  - カートの状態はZustandを利用したグローバルストア (`/stores/cartStore.ts`) で管理しています。`AddToCartButton`コンポーネントがこのストアを利用します。

---

## 4. 開発・動作確認方法

- **URLパス:** `http://localhost:3000/products/12345` のように、実在する商品IDを指定してアクセスしてください。
- **依存環境変数:** なし

---

## 5. ビジネスロジック・注意事項

- **在庫表示:** 在庫が5個以下になると「残りわずか」と表示されます。この閾値はビジネスサイドの要求で変更される可能性があります。
- **価格:** 表示価格は税抜価格です。カート投入時に`useCart`フック内で税込価格が計算されます。

---

## 6. 今後の改修予定

- [ ] レビュー投稿機能の実装 (Issue #56)
- [ ] お気に入り機能の追加