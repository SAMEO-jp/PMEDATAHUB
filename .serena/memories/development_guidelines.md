# 開発ガイドライン

## コード品質

### TypeScript
- 厳密な型チェックを有効にする
- `any`型の使用は最小限にする
- インターフェースを積極的に使用する
- 型推論を活用する

### React/Next.js
- 関数コンポーネントを使用する
- Hooksを適切に使用する
- Server ComponentsとClient Componentsを適切に使い分ける
- パフォーマンスを考慮した実装

### 状態管理
- Zustandを使用する
- グローバル状態は最小限にする
- ローカル状態はuseStateを使用する
- 複雑な状態はuseReducerを検討する

## ファイル構造

### コンポーネント分割
- 200行を超えるコンポーネントは分割する
- 再利用可能なコンポーネントは共通化する
- プロジェクト固有のコンポーネントは適切なディレクトリに配置する

### 型定義
- 型定義は`src/types/`に集約する
- プロジェクト固有の型は適切なファイルに配置する
- 共通の型は`types/index.ts`にエクスポートする

### API設計
- tRPCを使用する
- 型安全なAPIを設計する
- エラーハンドリングを適切に実装する
- バリデーションを実装する

## データベース設計

### 命名規則
- テーブル名: スネークケース
- カラム名: スネークケース（大文字）
- 外部キー: `テーブル名_ID`
- タイムスタンプ: `CREATED_AT`, `UPDATE_AT`

### インデックス
- 主キーには自動的にインデックスが作成される
- 検索頻度の高いカラムにインデックスを作成する
- 複合インデックスを適切に使用する

### データ整合性
- 外部キー制約を適切に設定する
- チェック制約でデータの整合性を保つ
- トランザクションを適切に使用する

## エラーハンドリング

### フロントエンド
- try-catch文を適切に使用する
- ユーザーフレンドリーなエラーメッセージを表示する
- エラー境界（Error Boundary）を実装する

### バックエンド
- 適切なHTTPステータスコードを返す
- エラーログを記録する
- 機密情報をエラーメッセージに含めない

## パフォーマンス最適化

### フロントエンド
- 不要な再レンダリングを避ける
- メモ化を適切に使用する
- 画像の最適化を行う
- コード分割を実装する

### バックエンド
- データベースクエリを最適化する
- キャッシュを適切に使用する
- 非同期処理を適切に実装する

## セキュリティ

### 入力値検証
- すべての入力値を検証する
- SQLインジェクション対策を実装する
- XSS対策を実装する

### ファイルアップロード
- ファイルサイズを制限する
- ファイル形式を制限する
- ファイル名をサニタイズする

### 認証・認可
- 適切な認証を実装する
- 権限チェックを実装する
- セッション管理を適切に行う